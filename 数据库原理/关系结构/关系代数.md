# 关系代数

- 选择操作：$\sigma_p(r) = \{t|t\in r and p(t)\}$
	- $p$ 是一个命题演算语句，如 $a > b$
	- $p$ 使用集合论逻辑关系谓词连接
	- $r$ 是 relation
- 投射：$\prod_{A_1,A_2,\cdots,A_k}(r)$
	- 从 relation 中选择某些列
	- 删除重复的行（已选列后）
- 交和并：$r\cup s, r\cap s$
	- schema 必须相同
	- attribute domain 必须相同
        - 对结果去重
- 差：$r - s = \{t|t\in r\ and\ t\not \in s\}$
	- schema 必须相同
	-  attribute domain 必须相同
- 笛卡尔积：$r\times s$
	- 就是组合，不多说
	- 优化：先投射/选择再做笛卡尔积，减少计算开销
- 重命名：重命名 relation $\rho_X(E)$，重命名 attributes $\rho_{X(A_1,\cdots,A_n)}(E)$
	- 将 schama 的 name E 改成 X
	- 将 schema 的 attribute 改成 $A_1,\cdots A_n$
	- 例子：自连接 $A\times \rho_B(A)$
- 自然连接：$r \bowtie s$
	- $r, s$ 中相同的列中相同的元组对应的行被保留
	- 满足交换律和结合律
	- 外连接
- 赋值操作：$r\leftarrow seq$

## 扩展关系代数操作

- 扩展投影：新列允许表达式，允许为新列重命名 'as'
- 聚集操作：$_{G_1,\cdots,G_n}\mathcal{G}_{F_1(A_1),\cdots,F_m(A_m)}(E)$
	- $E$ 是关系代数表达式
	- $G_i$ 是一系列需要被聚集的属性
	- $F_i$ 是聚集函数，如 `average/min/max/sum/count`
	- $A_i$ 是属性名