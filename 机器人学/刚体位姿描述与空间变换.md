---

mindmap-plugin: basic

---

# 刚体位姿描述与空间变换

## 基本概念
- 涉及坐标系
  - 刚体坐标系
  - 参考坐标系
- 定义
  - 刚体的位置：刚体坐标系**原点**在参考坐标系中的坐标
  - 刚体的姿态：刚体坐标系**各轴指向**在参考坐标系中的表示
  - 刚体的位姿：刚体的位置和姿态

## 表示方法
- 姿态矩阵
  - 方法：用刚体三轴（在参考坐标系下）的方向矢量构建矩阵
    - 旋转变换矩阵 $R$：按列向量构建
    - 方向余弦矩阵 $C$：按行向量构建，故 $R = C^T$
  - 注意：
    - 任何一个 $^Ax_B$ 都表示「$B$ 在 $A$ 系中的表示」、「$A$ 系到 $B$ 系的变换」
    - $(^AR_B)^{-1} = (^AR_B)^Y =~^BR_A$
    - 可合成
    - 机器人学用 $R$，航空航天用 $C$
- 姿态角
  - 欧拉角：三次基本旋转的角度，一个矢量
  - 基本旋转：**绕坐标轴**旋转有限角度，可与姿态变换矩阵建立一一对应关系 $R_x(\phi), R_y(\phi), R_z(\phi)$
  - 旋转顺序
    - 第一类欧拉角都转：xyz, xzy, yxz, yzx, zxy, zyx
    - 第二类欧拉角转俩：xyx, xzx, yxy, yzy, zxz, zyz
  - 转法
    - 定轴欧拉角：绕老轴转
    - 动轴欧拉角：绕新轴转
  - 计算
    - 根据姿态矩阵求欧拉角
      - 动轴 xyz
        - 奇异条件 $\beta = \pm\dfrac{\pi}{2}$，$\alpha \pm \gamma = \arctan 2(\pm a_{21}, a_{22})$
        - $$\left\{\begin{aligned}&\beta = \arcsin a_{13}\ or\ \pi-\arcsin a_{13}\\&\alpha = \arctan2(-a_{23}/c_\beta, a_{33}/c_\beta)\\&\gamma=\arctan2(-a_{12}/c_\beta, a_{11}/c_\beta)\end{aligned}\right.$$
      - 动轴 zxz
        - 奇异条件 $\beta = 0, \pi$，只能求 $\alpha \pm \gamma = \arctan 2(a_{21}, a_{11})$
        - $$\left\{\begin{aligned}&\beta = \arccos a_{33}\ or\ -\arccos a_{33}\\&\alpha = \arctan2(a_{13}/s_\beta, -a_{23}/s_\beta)\\&\gamma=\arctan2(a_{31}/s_\beta, a_{32}/s_\beta)\end{aligned}\right.$$
      - 定轴 xyz
        - 又称 RPY （roll, pitch, yaw）角
        - 有专门定义 $\Phi = (\Phi, \theta, \varphi)$
        - 麻了这解，不写了自己看去
      - 注
        - $R = [a_{ij}]$
        - 奇异是因为转角被抵消
    - 根据欧拉角求姿态矩阵
      - 定轴欧拉角：绕老轴转，从右向左乘
      - 动轴欧拉角：绕新轴转，从左向右乘
- 轴-角表示法
	- 方法：刚体的空间姿态可由绕某个轴转过一个角度得到
	- 表示：用单位矢量转轴 $\pmb k$ 及绕次转轴的转角 $\phi$ 来描述
		- $R = c_{\phi}\pmb I + (1 - c_\phi)\pmb k\pmb k^T + s_\phi\pmb k^\times$，$\pmb k^\times$ 是反对称矩阵
		- 从旋转矩阵解轴角
- 单位四元数法
	- 定义：$Q = \eta + \varepsilon_x\pmb i + \varepsilon_y\pmb j +\varepsilon_z\pmb k = [\eta\ \varepsilon_x\ \varepsilon_y\ \varepsilon_z]^T$
		- 是复数的推广
		- $\eta$ 标量部分，$\varepsilon$ 矢量部分
	- 四元数计算规则
		- 乘积：$Q_1\circ Q_2 = \{\eta_1\eta_2 - \varepsilon_1\cdot\varepsilon_2, \eta_1\varepsilon_2 + \eta_2\varepsilon_1 + \varepsilon_1\times\varepsilon_2\}$
		- 共轭：$Q^\cdot=\{\eta, -\varepsilon\}$
		- $模$：$||Q|| = \sqrt{\eta^2 + \varepsilon_x^2+\varepsilon_y^2+\varepsilon_z^2}$
		- 倒数：$Q^{-1} = \dfrac{Q^*}{||Q||^2}$
	- 与其他表示法的相互转化
	- 有限转动的合成：从左往右乘
- 齐次坐标及齐次变换
	- 思路：矢量变换包含「坐标平移」和「坐标旋转」
	- 原始公式：$^A\pmb p_a = ~^A\pmb p_{ab} + ~^A\pmb R_{B} ~^B\pmb p_b$
	- 齐次化：$$\left[\begin{matrix}^A\pmb p_a\\1 \end{matrix}\right] = \left[\begin{matrix}^A\pmb R_B & ^A\pmb p_{ab}\\\pmb0 & 1\end{matrix}\right]\left[\begin{matrix}^B\pmb p_b\\1\end{matrix}\right]$$
		- $\begin{matrix}R = [\pmb n & \pmb o & \pmb a]^T\end{matrix}$
		- 简化表达：$^A\pmb{\overline p_a} = ~^A T_B~^B\pmb{\overline p}_b$
		- 纯平移，纯旋转
	- 齐次变换的逆
		- $T^{-1} = \left[\begin{matrix}\pmb R^{-1}& -\pmb R^{-1}\pmb p\\\pmb 0 & 1\end{matrix}\right]$
	- 有限转动的合成：从左向右乘