---

mindmap-plugin: basic

---

# 选路算法

## 基本概念

- 分组通过路由器转发，每个路由器都有一张转发表，选路算法决定 转发表内容
- 选路：确定分组从发送方传送到接收方所要通过的路径（路由）
- 默认路由器：默认网关
	- 源路由器：源主机的默认网关
	- 目的路由器：目的主机的默认网关
	- 从源路由到目的路由的路径

## 算法

- 模型：图
- 分类
	- 全局选路：用完整的、全局性的网络信息
	- 分散式选路：迭代的、分布式的方式
	- 静态选路
	- 动态选路：动态改变路径
	- 负载敏感：链路费用动态变化
	- 负载迟钝：费用不变
- **链路状态选路LS算法**
	- 前提：已知网络拓扑和链路费用
	- 获取信息：节点广播链路状态算法
	- 实现：Dijkstra
	- 最低费用路径树：根据目的节点的找出顺序和其费用以及前一节点，可以画出源节点u到所有目的节点的最低费用路径树
	- 转发表：根据最优路径树可以确定目的对应下一跳
	- 默认路由：具有相同下一跳的表项，目的节点用*表示。
	- 问题：链路振荡，链路费用非对称
		- 避免所有的路由器同时运行LS算法
		- 因特网自同步：每台路由器随机发送链路通告
- **距离向量选路DV算法**
	- 前提：只知道邻居的信息
	- 实现：Bellman-ford
	- 问题：链路费用增加时，选路回环
		- 原理：只有与改变费用的边直接连接的节点知道改变了，而它自己更新费用时又要用不知道费用改变的节点的信息，导致走过来又走回去还算错费用
	- 解决：毒性逆转
		- 原理：只告诉相邻节点在其距离向量中最小的费用，切断其余路线（取消被改变费用边所在路径的信息）
		- 局限：未解决“不可计数问题”，多于三个节点的回路不能用
- 层次选路
	- 动机：网络规模太大，管理自治（隐私）
	- 解决：将一个大的系统划分成若干小系统（自治系统），自治系统之间再互连
	- 自治系统AS：按区域划分的系统
	- 网关路由器：连接不同AS的路由器
		- 自治系统内部运行内部选路协议
		- 不同自治系统直接基于AS网关运行选路协议
	- AS内：OSPF开放最短路径优先，LS
	- AS间：BGP边界网关协议，DV