
# 基础知识

## 运输层服务

- 作用：为主机上的应用进程提供直接的通信服务
- 特性
	- 进程之间逻辑连接，无需考虑具体的物理链路
		- 运输层协议运行在端系统，**不在路由器**，不考虑报文在网络核心如何传递
	- 中间路由器既不处理也不识别运输层加在报文上的任何信息
	- 运输层协议所能提供的服务受底层网络协议服务模型的限制。如，时延和带宽保证
		- 某些特定服务即使底层网络协议不提供，运输层协议也能提供，如可靠连接
- 运输层协议：端系统间 IP 交付服务 -> 进程间交付服务
	- 服务：数据交付和差错检查
	- TCP：可靠、面向连接
	- UDP：不可靠、无连接
- 网络层
	- IP 协议
	- 为主机之间提供逻辑通信
	- 不可靠

## 复用和分解

- 功能：使运输层从底层网络接收数据时，能正确地定向到相应的一个进程（套接字）
- 方法
	- 多路复用：从不同套接字收集数据块，并为每个数据块封装上首部信息，生成报文段，传递到网络层
	- 多路分解：将报文段中的数据交付到正确的套接字
- 端口号：1-1023 为周知端口号，保留给固定应用程序
- UDP
	- 创建
		- 客户机：自动分配端口号
		- 服务器：指定特定端口号
	- 套接字组成：二元组（ip，port）
	- 特性
		- 两个不同源但具有相同目的套接字的 UDP 报文段，可通过相同套接字定向到相同的目的进程（多对一）
		- 源端口号的用途：目的方回发报文段中的“返回地址”
- TCP
	- 套接字组成：四元组（src ip，src port，dst ip，dst port）
	- 特性
		- 两个具有不同源套接字的TCP报文段，将被定向到两个不同的套接字
		- 一个web服务器可以同时与多个客户机连接，并产生多个进程
		- 每个进程都有自己的连接套接字
	- 分类
		- 持续 HTTP：同一个服务器套接字交互报文
		- 非持续HTTP：每对请求/响应都创建新的 TCP 连接