---

mindmap-plugin: basic

---

# 基本概念

## 概述

- 功能：将分组通过一个链路，从一个节点传输到邻近的另 一个节点
- 分类
	- 广播链路：许多主机被连接到相同的通信信道，总线结构
		- 问题：需要媒体访问协议来协调传输和避免“碰撞”
	- 点对点通信链路：直接链接两个节点的链路，每一端有一个节点
		- 解决：成帧、可靠数据传输、差错检测和流量控制
- 节点：主机和路由器
- 链路：连接相邻节点的通信信道
- 协议：用来在单段链路上传输分组。
	- 动作：差错检测、重传、流量控制和随机访问
	- 数据单元：帧
- 服务：
	- 成帧：把网络层数据报封装成链路层帧（包含编号、物理地址等）
	- 可靠交付：保证网络层的数据报无差错地通过链路层
		- 实现：确认和重传
		- 纠错：无线差错率高，在本地纠错
	- 链路访问：由媒体访问控制MAC协议定义帧在链路上传输的规则
		- 点对点
		- 广播
	- 流量控制
	- 差错检测
	- 差错纠正
	- 半双工全双工
- 实现
	- 适配器：网卡NIC
		- 实现物理层和链路层的主要功能
		- 总线接口：负责与父节点通信
		- 链路接口：实现链路层协议
	- 相邻节点帧传输：成帧，传输帧，接收帧，解封
	- 差错检测：发送适配器设置差错检测比特，接收适配器完成差错检测
	- 可靠交付：序号、定时器和确认
	- 随机访问：随机访问协议

## 差错检测和纠错

- 比特奇偶校验：统计奇偶比特数，对比发送接收方
- 二维奇偶校验：数据组织成矩阵，按行、列统计奇偶比特数
- 检查和
	- 定义：数据每两个字节作为一个16位整数，求和后逐位取反
	- 注意：当数字作加法时，最高位的进位要回加到结果中
	- 接收方：对收到的数据（包含发送方发送的检查和）按同样方法求和，全1无差错，否则有。
- 循环冗余检测CRC
	- 给定生成多项式G，附加比特R位数r
	- 发送方
		- 计算出一个r位附加比特R，添加到D的后面产生DR（d+r 比特）
		- DR能被G模2运算整除
	- 接收方
		- DR模2除以G，余数为0则正确，否则错误
	- R的计算：将数据D后面添加r个0，模2除以给定的生成多项式G，所得余数即为R（r位）
	- 除法时，每步的减法是按位异或

## 多路访问协议

- 信道划分协议
	- TDM：时间帧和时隙
	- FDM：划分信道
	- CDMA：每个节点分配不同编码，不同节点可以同时发送
- 随机访问协议
	- 时隙ALOHA：当节点有新的帧要发送，需等到下一个时隙开始，才传输整个帧
		- 特点：单节点全速、分布式、简单、多节点效率低
		- 冲突：以概率 p 在后续的每一个时隙重传该帧，直到成功
		- 三种可能时隙
		- 效率：$N$ 个节点成功率 $Np(1-p)^{N-1}$，取极限37%
	- 纯ALOHA：不用等到下一个时隙就发，有就发，其它一样
	- CSMA
		- 注释：以太网采用
		- 载波侦听：传送前侦听，信道忙则不发，闲则发
		- 冲突检测：边传输边监听信道冲突，检测到就停止传输
- 轮流协议
	- 轮询协议：定一个主节点，以循环的方式轮询每个节点
	- 令牌传递协议：设置令牌在网络中按固定顺序循环传递，击鼓传花给节点传输机会

## 链路层编址

- 网络层地址：IP，DNS域名系统（主机名->IP）
- 链路层地址：MAC地址，ARP地址解析协议（IP->MAC）