---

mindmap-plugin: basic

---

# 成像及其变换

## 光度学
- 发光强度：从光源流出的能量总量，单位 $W$
- 光通量：观察者从光源感受到的能量，单位 $lm$（流明）
- 亮度：光源沿某个方向上的亮度是用在该方向上的单位投影面积在单位立体角（单位球面度）内发出的光通量来衡量，单位 $cd/m^2$
- 照度：被光线照射的表面上的照度用照射在单位面积上的光通量来衡量，单位 $lx/lux$（勒克斯）
- 图像亮度
  - 由照度分量 $i(x, y)$ 和反射分量 $r(x, y)$ 相乘得到 $f(x, y) = i(x, y)r(x, y)$
  - $f(x, y)$ 为图像在 $(x, y)$ 处的灰度值

## 图像采样和量化
- 采样：空间坐标的离散化
  - 空间分辨率：空间采样的像素分辨率，表明图像尺寸
- 量化：灰度值的离散化
  - 幅度/灰度分辨率：每个像素点的可取灰度级数，一般取 $2^k$

## 成像模型
- 坐标系
  - 世界坐标系：三维 $(X_w, Y_w, Z_w)$，物体在真实世界坐标
  - 摄像机坐标系：三维 $(x, y, z)$，以光心维相机坐标系的原点，平行于图像坐标系的 $x, y$ 方向为 $X_c, Y_c$ 轴，$Z_c$ 是光轴
  - 图像坐标系：二维 $(X,Y)$，以物理单位表示
  - 像素坐标系：二维 $(u, v)$，以像素单位表示，坐标原点与图像坐标系不同
- 齐次变换
  - 齐次坐标
    - 用 $n + 1$ 维矢量表示一个 $n$ 维矢量 $(x, y, z, k) -> (x,  y, z)$
    - 可以表示无穷远点
  - 齐次变换矩阵
    - 功能：用于摄像机成像
    - 特性：包含一个旋转矩阵和一个列向量（表示摄像机坐标原点在世界坐标系中对应的向量）
    - 摄像机外参
      - 旋转矩阵 $R$，将世界坐标系旋转到与摄像机坐标系一致
      - 平移矩阵 $T$，将世界坐标系平移到摄像机坐标系
    - 摄像机内参
      - 投影变换 $P$，把物体投影成像，有两步
        - 投影到像平面 $X = \dfrac{fx}{z}, Y = \dfrac{fy}{z}$
        - 采样离散化，平移坐标原点
    - 成像变换矩阵：$C_h = PRTW_h$，其中 $C_h$ 是图像坐标系坐标，$W_h$ 是世界坐标系坐标
      - 前两个矩阵是内参，第三个是外参$$s\left[\begin{matrix}u\\v\\1\end{matrix}\right] = \left[\begin{matrix}\dfrac{1}{dX} &0 &u_0\\0 &\dfrac{1}{dY} &v_0\\0&0&1\end{matrix}\right]\left[\begin{matrix}f &0 & 0 &0\\0 &f &0 &0 \\0&0&1&0\end{matrix}\right]\left[\begin{matrix}R &t\\\pmb 0 &1\end{matrix}\right]\left[\begin{matrix}X_w\\Y_w\\Z_w\\1\end{matrix}\right]$$

## 摄像机标定
- 传统方法
  - 使用标定板
  - 利用已知的景物结构信息